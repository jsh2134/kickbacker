{% extends 'base.html' %}

{% block header %}
 <script type='text/javascript'>
 function toggle_div(divid) {
    $(divid).toggle();
 }
 </script>
{% endblock%}

{% block content %}

<input type=hidden value="{{project}}">

<div id='project-{{project.id}}' class='project-leaderboard'>
    <div class='project-leaderboard-container well' >
      <div class='project-leaderboard-desc'>
        <a href="http://kickstarter.com/{{project.link}}">
          <img src='{{project.img}}' width='150px' class='thumb'>
        </a>
        <h1>Kickbacker Leaderboard</h1>
        <div class="caption">
          <a href="http://kickstarter.com/{{project.link}}">
            <span class='project-title'>{{ project.name }}</span>
          </a>
          <p>
            <span class='project-author'>by <a href="http://kickstarter.com/{{project.author_link}}">{{project.author}}</a></span>
            <br><br>
            <span class='project-clicks'>{{ total_clicks }} Total Clicks</span>
            &nbsp;&nbsp;
            <span class='project-clicks'>{{ backers|length }} Kickbackers</span>
          </p>
        </div>
      </div>
      <div class='project-leaderboard-kickback' style='float:right;'>
        <div>
          <h3> Your KickBack</h3>
          <p class='prize-text'>{{project.backer_prize.desc}} 
          <b>(A ${{project.backer_prize.value}} value)</b>
          </p>
       <!-- TODO 
         <span style="font-size:24px;color:green">24d 12h 22m Remaining</span>
        -->
        </div>
      </div>
</div>

<div class="backers-container" style='margin:10px;'>
  {% for backer in sorted_backers %}
    <div class='backer-wrap well'>
      <div id='backer-{{backer}}' class='backer'>
        <div class="backer-rank">
          {{ loop.index }}.
        </div>
        <div class="backer-info">
          <img src='{{backers[backer].img}}' width='75' class="thumb">
          <h2>
            <a href="http://kickstarter.com/profile/{{ backer }}">
              {{ backers[backer].name }}
            </a>
          </h2>
          {% if backers[backer].location %}
            <i class="icon-globe"></i> {{ backers[backer].location }}
            <br>
          {% endif %}
          <i class="icon-user"></i> Since {{ backers[backer]['key']['created'].strftime('%B %d') }}
        </div>
        <div class="backer-stats">
         <h1>
             {{ backers[backer]['key']['clicks'] }} Clicks
         </h1>
             <a target='_blank' href="http://demo.awe.sm/{{ backers[backer]['key']['id'] }}">http://demo.awe.sm/{{ backers[backer]['key']['id'] }}</a>
        </div>
        <div class="backer-badges">
         <h1>
             {{ backers[backer]['key']['rewards']|length }} Rewards
         </h1>
             {% if backers[backer]['key']['rewards']|length > 0 %}
              {% for reward in backers[backer]['key']['rewards'] %}
                <i class="icon-bookmark"></i> {{ reward }} <br>
              {% endfor %}
             {% endif %}
        </div>
      </div>
    </div>
  {% endfor %}
</div>

{% endblock content %}

